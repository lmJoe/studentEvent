(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21d069ca"],{"6e12":function(t,s,e){"use strict";e("e071")},ad95:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAlBJREFUWEfFlzFoFEEUhv83e6KFCRZCupDsHXaSRgRNYdTC2wOLFJ5gaakQvEWRs4oQjGjYBUFLe2MhKO6ehRqLKGglVoHLXkiXThIFxbt9sit7XC6z2Z3lvN123/v/b97MvJkh5PxRzv5IDTDxwj6iHezMsNDOgPkkQGMgjIUDYGwBvAWiz+R3PnR+aysbs7XvaQaXCmCyYVXBWCRATyPKgAdCvVU2l5Pi9wdYvqRNjpwKjG8lCcn+M/CwtfOpjurzTlx+LEDRsc8x8dssxv05xHR+vVJ7J9OSApQaVtVnPBuEeaQhCJebkinZAzDzfr6w+Wv0zyDNI63xQ9sHVs7Ot3u19wDojuWAYKQB8AwzzNddi9PEg+F6FbMSC6C71jUAj1OJAVAG+Cd83TPMJ5FHtwIl59GoL9rfwBj/rwCETeEXjjcrc9uBTxdgwl26ICAaac2DuIwVgA+/vGHcfLMLQHftewDXhwEA0KJn1O70AVirAE4PBwAfPcOc7q9AE+DicABo3TNqpd0ADXsHzIeHAkD0wyvXRgYGcOzV0tF2QdwFEGzj5E8K4NrKUwBglSEetIwbLwPXomNPM/FtABf3p5BNgau+CLsmxE+ZtQBkLeyMjn0VxHMApmJApItQeRv2if8EsOAZ5v0Q4rV1AgJf5ACSbZilEcWM7iszLZDgWTCuyGKkjShLK05ebZKIuFYclk3xMMoEEHcYRWIqx7EyQNJxHAjmfiEJIHK9kkVlzfVS2p3bPK/lvQssv4dJD0WuTzPl7aaQkOptqKCnHPoXaBYiMPnj4gkAAAAASUVORK5CYII="},cd82:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"guardsysVisitPage"},[s("div",{staticClass:"content"},[s("List",[s("ListItem",[s("span",[t._v("访问时间")]),s("p",[t._v(t._s(t.visitTime))])]),s("ListItem",[s("span",[t._v("被访人")]),s("p",[t._v(t._s(t.teacherName))])]),s("ListItem",[s("span",[t._v("来访目的")]),s("p",[t._v(t._s(t.visitReason))])]),s("ListItem",[s("span",[t._v("访问地址")]),s("p",[t._v(t._s(t.visitAddress))])])],1)],1),s("div",{staticClass:"cardStep"},[s("h3",[t._v("来访人员")]),s("Timeline",t._l(t.spList,(function(e,i){return s("TimelineItem",{key:i,scopedSlots:t._u([{key:"dot",fn:function(){return[s("span",{staticClass:"name"},[t._v(t._s(""==e.visitName||null==e.visitName?"访":e.visitName.charAt(0)))])]},proxy:!0}],null,!0)},[s("div",[s("p",{staticClass:"doThing"},[s("span",[t._v(t._s(e.visitName))]),s("span",{staticClass:"time",on:{click:function(s){return t.hasVisit(e.eventId,e.id)}}},[t._v(t._s(e.btnTips))])]),s("p",{staticClass:"phone"},[s("span",[t._v(t._s(e.phone))]),s("Tag",{staticClass:"tag"},[t._v("预约到访")])],1)])])})),1)],1)])},a=[],n=(e("a9e3"),e("b1d0")),o=e("1271"),c=e("3b2d"),d=e("ad95"),r=e.n(d),v={name:"index",data:function(){return{title:"门卫管理",isStudent:!1,icon3:r.a,eventId:"",visitTime:"",teacherName:"",visitReason:"",visitAddress:"",spList:[],id:""}},created:function(){document.title=this.title,this.eventId=c["a"].getQueryVariable("eventId"),this.id=c["a"].getQueryVariable("id")},activated:function(){document.title=this.title},mounted:function(){this.getDetailFun()},methods:{getDetailFun:function(){var t=this;Object(n["a"])({method:"get",url:o["a"].recordUrl.guardianCheckVisitDetail+"?eventId="+Number(this.eventId),data:{},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(s){if(console.log("res",s),200==s.code){for(var e=0;e<s.data.visitorRecordList.length;e++)0==s.data.visitorRecordList[e].accessStatus?s.data.visitorRecordList[e].btnTips="未到访":s.data.visitorRecordList[e].btnTips="已登记";t.spList=s.data.visitorRecordList,console.log("返回数据",t.spList),t.visitTime=s.data.eventVisitRecord.startTime,t.teacherName=s.data.eventVisitRecord.teacherName,t.visitReason=s.data.eventVisitRecord.visitReason,t.visitAddress=s.data.eventVisitRecord.visitDestination}else t.$Message.info(s.msg)})).catch((function(t){console.log(t)}))},hasVisit:function(t,s){var e=this,i={eventId:t,visitorId:s,checkStatus:1,guardianId:Number(this.id)};console.log("params",i),Object(n["a"])({method:"post",url:o["a"].recordUrl.guardianCheck,data:i,headers:{"Content-Type":"application/json"}}).then((function(t){if(console.log("res",t),200==t.code){console.log("res",t),e.$Message.info(t.msg);for(var i=0;e.spList.length;i++)console.log("this.spList",e.spList[i],s),e.spList[i].id==s&&(e.spList[i].btnTips="已登记",e.$set(e.spList,i,e.spList[i]))}else e.$Message.info(t.msg)})).catch((function(t){console.log(t)}))}}},l=v,u=(e("6e12"),e("2877")),A=Object(u["a"])(l,i,a,!1,null,"094de40a",null);s["default"]=A.exports},e071:function(t,s,e){}}]);