(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ba39746"],{"083a":function(t,e,a){"use strict";var i=a("0d51"),o=TypeError;t.exports=function(t,e){if(!delete t[e])throw o("Cannot delete property "+i(e)+" of "+i(t))}},1583:function(t,e,a){"use strict";a("4e6a")},1741:function(t,e,a){t.exports=a.p+"img/status1.e0513603.png"},"4e6a":function(t,e,a){},"7e12":function(t,e,a){"use strict";var i=a("da84"),o=a("d039"),n=a("e330"),r=a("577e"),s=a("58a8").trim,l=a("5899"),c=n("".charAt),d=i.parseFloat,u=i.Symbol,f=u&&u.iterator,m=1/d(l+"-0")!==-1/0||f&&!o((function(){d(Object(f))}));t.exports=m?function(t){var e=s(r(t)),a=d(e);return 0===a&&"-"===c(e,0)?-0:a}:d},a434:function(t,e,a){"use strict";var i=a("23e7"),o=a("7b0b"),n=a("23cb"),r=a("5926"),s=a("07fa"),l=a("3a34"),c=a("3511"),d=a("65f0"),u=a("8418"),f=a("083a"),m=a("1dde"),h=m("splice"),p=Math.max,g=Math.min;i({target:"Array",proto:!0,forced:!h},{splice:function(t,e){var a,i,m,h,b,v,y=o(this),w=s(y),T=n(t,w),V=arguments.length;for(0===V?a=i=0:1===V?(a=0,i=w-T):(a=V-2,i=g(p(r(e),0),w-T)),c(w+a-i),m=d(y,i),h=0;h<i;h++)b=T+h,b in y&&u(m,h,y[b]);if(m.length=i,a<i){for(h=T;h<w-i;h++)b=h+i,v=h+a,b in y?y[v]=y[b]:f(y,v);for(h=w;h>w-i+a;h--)f(y,h-1)}else if(a>i)for(h=w-i;h>T;h--)b=h+i-1,v=h+a-1,b in y?y[v]=y[b]:f(y,v);for(h=0;h<a;h++)y[h+T]=arguments[h+2];return l(y,w-i+a),m}})},b0c0:function(t,e,a){"use strict";var i=a("83ab"),o=a("5e77").EXISTS,n=a("e330"),r=a("edd0"),s=Function.prototype,l=n(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=n(c.exec),u="name";i&&!o&&r(s,u,{configurable:!0,get:function(){try{return d(c,l(this))[1]}catch(t){return""}}})},ba9f:function(t,e,a){t.exports=a("c229")},c229:function(t,e,a){!function(e,a){t.exports=a()}(0,(function(){return function(t){var e={};function a(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(i,o,function(e){return t[e]}.bind(null,o));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";var i;function o(t){return["image/png","image/jpeg","image/gif"].some(e=>e===t)}a.r(e),a.d(e,"canvastoDataURL",(function(){return r})),a.d(e,"canvastoFile",(function(){return s})),a.d(e,"dataURLtoFile",(function(){return c})),a.d(e,"dataURLtoImage",(function(){return d})),a.d(e,"downloadFile",(function(){return u})),a.d(e,"filetoDataURL",(function(){return f})),a.d(e,"imagetoCanvas",(function(){return h})),a.d(e,"urltoBlob",(function(){return p})),a.d(e,"urltoImage",(function(){return g})),a.d(e,"compress",(function(){return v})),a.d(e,"compressAccurately",(function(){return y})),a.d(e,"EImageType",(function(){return i})),function(t){t.PNG="image/png",t.JPEG="image/jpeg",t.GIF="image/gif"}(i||(i={}));var n=function(t,e,a,i){return new(a||(a=Promise))((function(o,n){function r(t){try{l(i.next(t))}catch(t){n(t)}}function s(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};function r(t,e=.92,a=i.JPEG){return n(this,void 0,void 0,(function*(){return o(a)||(a=i.JPEG),t.toDataURL(a,e)}))}function s(t,e=.92,a=i.JPEG){return new Promise(i=>t.toBlob(t=>i(t),a,e))}var l=function(t,e,a,i){return new(a||(a=Promise))((function(o,n){function r(t){try{l(i.next(t))}catch(t){n(t)}}function s(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};function c(t,e){return l(this,void 0,void 0,(function*(){const a=t.split(",");let i=a[0].match(/:(.*?);/)[1];const n=atob(a[1]);let r=n.length;const s=new Uint8Array(r);for(;r--;)s[r]=n.charCodeAt(r);return o(e)&&(i=e),new Blob([s],{type:i})}))}function d(t){return new Promise((e,a)=>{const i=new Image;i.onload=()=>e(i),i.onerror=()=>a(new Error("dataURLtoImage(): dataURL is illegal")),i.src=t})}function u(t,e){const a=document.createElement("a");a.href=window.URL.createObjectURL(t),a.download=e||Date.now().toString(36),document.body.appendChild(a);const i=document.createEvent("MouseEvents");i.initEvent("click",!1,!1),a.dispatchEvent(i),document.body.removeChild(a)}function f(t){return new Promise(e=>{const a=new FileReader;a.onloadend=t=>e(t.target.result),a.readAsDataURL(t)})}var m=function(t,e,a,i){return new(a||(a=Promise))((function(o,n){function r(t){try{l(i.next(t))}catch(t){n(t)}}function s(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};function h(t,e={}){return m(this,void 0,void 0,(function*(){const a=Object.assign({},e),i=document.createElement("canvas"),o=i.getContext("2d");let n,r;for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&(a[t]=Number(a[t]));if(a.scale){const e=a.scale>0&&a.scale<10?a.scale:1;r=t.width*e,n=t.height*e}else r=a.width||a.height*t.width/t.height||t.width,n=a.height||a.width*t.height/t.width||t.height;switch([5,6,7,8].some(t=>t===a.orientation)?(i.height=r,i.width=n):(i.height=n,i.width=r),a.orientation){case 3:o.rotate(180*Math.PI/180),o.drawImage(t,-i.width,-i.height,i.width,i.height);break;case 6:o.rotate(90*Math.PI/180),o.drawImage(t,0,-i.width,i.height,i.width);break;case 8:o.rotate(270*Math.PI/180),o.drawImage(t,-i.height,0,i.height,i.width);break;case 2:o.translate(i.width,0),o.scale(-1,1),o.drawImage(t,0,0,i.width,i.height);break;case 4:o.translate(i.width,0),o.scale(-1,1),o.rotate(180*Math.PI/180),o.drawImage(t,-i.width,-i.height,i.width,i.height);break;case 5:o.translate(i.width,0),o.scale(-1,1),o.rotate(90*Math.PI/180),o.drawImage(t,0,-i.width,i.height,i.width);break;case 7:o.translate(i.width,0),o.scale(-1,1),o.rotate(270*Math.PI/180),o.drawImage(t,-i.height,0,i.height,i.width);break;default:o.drawImage(t,0,0,i.width,i.height)}return i}))}function p(t){return fetch(t).then(t=>t.blob())}function g(t){return new Promise((e,a)=>{const i=new Image;i.onload=()=>e(i),i.onerror=()=>a(new Error("urltoImage(): Image failed to load, please check the image URL")),i.src=t})}var b=function(t,e,a,i){return new(a||(a=Promise))((function(o,n){function r(t){try{l(i.next(t))}catch(t){n(t)}}function s(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};function v(t,e={}){return b(this,void 0,void 0,(function*(){if(!(t instanceof Blob))throw new Error("compress(): First arg must be a Blob object or a File object.");if("object"!=typeof e&&(e=Object.assign({quality:e})),e.quality=Number(e.quality),Number.isNaN(e.quality))return t;const a=yield f(t);let n=a.split(",")[0].match(/:(.*?);/)[1],s=i.JPEG;o(e.type)&&(s=e.type,n=e.type);const l=yield d(a),u=yield h(l,Object.assign({},e)),m=yield r(u,e.quality,s),p=yield c(m,n);return p.size>t.size?t:p}))}function y(t,e={}){return b(this,void 0,void 0,(function*(){if(!(t instanceof Blob))throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");if("object"!=typeof e&&(e=Object.assign({size:e})),e.size=Number(e.size),Number.isNaN(e.size))return t;if(1024*e.size>t.size)return t;e.accuracy=Number(e.accuracy),(!e.accuracy||e.accuracy<.8||e.accuracy>.99)&&(e.accuracy=.95);const a=e.size*(2-e.accuracy)*1024,n=1024*e.size,s=e.size*e.accuracy*1024,l=yield f(t);let u=l.split(",")[0].match(/:(.*?);/)[1],m=i.JPEG;o(e.type)&&(m=e.type,u=e.type);const p=yield d(l),g=yield h(p,Object.assign({},e));let b,v=.5;const y=[null,null];for(let t=1;t<=7;t++){b=yield r(g,v,m);const e=.75*b.length;if(7===t){(a<e||s>e)&&(b=[b,...y].filter(t=>t).sort((t,e)=>Math.abs(.75*t.length-n)-Math.abs(.75*e.length-n))[0]);break}if(a<e)y[1]=b,v-=Math.pow(.5,t+1);else{if(!(s>e))break;y[0]=b,v+=Math.pow(.5,t+1)}}const w=yield c(b,u);return w.size>t.size?t:w}))}}])}))},c35a:function(t,e,a){"use strict";var i=a("23e7"),o=a("7e12");i({target:"Number",stat:!0,forced:Number.parseFloat!==o},{parseFloat:o})},e56a:function(t,e,a){"use strict";a.r(e);a("b0c0");var i,o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"submitPage"},[e("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":80}},[e("FormItem",{attrs:{label:"请假类型"}},[e("Select",{attrs:{placeholder:"请选择请假类型"},model:{value:t.formValidate.status,callback:function(e){t.$set(t.formValidate,"status",e)},expression:"formValidate.status"}},[e("Option",{attrs:{value:"1"}},[t._v("事假")]),e("Option",{attrs:{value:"2"}},[t._v("病假")]),e("Option",{attrs:{value:"3"}},[t._v("其他")])],1)],1),e("FormItem",{attrs:{label:"开始时间"}},[e("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"请选择开始时间"},on:{"on-change":function(e){return t.choseStartTime()},"on-ok":function(e){return t.choseStartTime()},"on-clear":function(e){return t.clearStartTime()}},model:{value:t.formValidate.startTime,callback:function(e){t.$set(t.formValidate,"startTime",e)},expression:"formValidate.startTime"}})],1),e("FormItem",{attrs:{label:"结束时间"}},[e("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"请选择结束时间"},on:{"on-change":function(e){return t.choseEndTime()},"on-ok":function(e){return t.choseEndTime()},"on-clear":function(e){return t.clearEndTime()}},model:{value:t.formValidate.endTime,callback:function(e){t.$set(t.formValidate,"endTime",e)},expression:"formValidate.endTime"}})],1),e("FormItem",{attrs:{label:"请假时长"}},[e("Input",{attrs:{readonly:""},model:{value:t.formValidate.totalTime,callback:function(e){t.$set(t.formValidate,"totalTime",e)},expression:"formValidate.totalTime"}})],1),e("FormItem",{attrs:{label:"体温情况"}},[e("RadioGroup",{model:{value:t.formValidate.bodyTempStat,callback:function(e){t.$set(t.formValidate,"bodyTempStat",e)},expression:"formValidate.bodyTempStat"}},[e("Radio",{attrs:{label:"体温正常",border:""}}),e("Radio",{attrs:{label:"体温异常",border:""}})],1)],1),e("FormItem",{attrs:{label:"体温"}},[e("Input",{attrs:{type:"number",maxlength:"4",placeholder:"请填写温度(只可填数字,例如36.5)"},on:{"on-blur":function(e){return t.changeBodyTemp()}},model:{value:t.formValidate.bodyTemp,callback:function(e){t.$set(t.formValidate,"bodyTemp",e)},expression:"formValidate.bodyTemp"}})],1),e("FormItem",{attrs:{label:"请假事由","label-position":"top"}},[e("Input",{staticClass:"textarea",attrs:{type:"textarea",maxlength:"140","show-word-limit":"",autosize:{minRows:2,maxRows:6},placeholder:"请输入请假事由，若请病假，请填写病情，如发烧（体温度数），是否咳嗽，是否咽喉痛等。"},model:{value:t.formValidate.desc,callback:function(e){t.$set(t.formValidate,"desc",e)},expression:"formValidate.desc"}})],1),e("FormItem",{staticClass:"uploadBox"},[t._l(t.formValidate.uploadList,(function(a,i){return e("div",{key:i,staticClass:"demo-upload-list"},["finished"===a.status?[e("img",{attrs:{src:a.url,fit:"cover",width:"100%",height:"100%",alt:""}}),e("div",{staticClass:"demo-upload-list-cover"},[e("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(a.name)}}}),e("Icon",{attrs:{type:"ios-trash-outline"},on:{click:function(e){return t.handleRemove(a)}}})],1)]:[a.showProgress?e("Progress",{attrs:{percent:a.percentage,"hide-info":""}}):t._e()]],2)})),e("Upload",{ref:"upload",attrs:{"show-upload-list":!1,"default-file-list":t.formValidate.defaultList,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":8224,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,multiple:"",type:"drag",action:"https://xskwx.zjhuaxuntong.com/jxaxService/eventrec/uploadEventPic"}},[e("div",{staticClass:"upload"},[e("span",[t._v("图片")]),e("Icon",{attrs:{type:"ios-add-circle-outline",size:"20"}})],1)]),e("ImagePreview",{attrs:{"preview-list":["http://39.171.241.227:18551/images/event/"+t.formValidate.imgName]},model:{value:t.formValidate.visible,callback:function(e){t.$set(t.formValidate,"visible",e)},expression:"formValidate.visible"}})],2),e("FormItem",{staticClass:"lastFrom"},[e("Button",{staticClass:"submitBtn",attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("提交")])],1)],1),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]})],1)},n=[],r=a("ade3"),s=(a("d3b7"),a("159b"),a("14d9"),a("c35a"),a("a9e3"),a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("a434"),a("b1d0")),l=a("1271"),c=a("3b2d"),d=a("ba9f"),u=(a("1741"),{name:"index",data:function(){return{title:"学生请假",formValidate:{status:"",startTime:"",endTime:"",totalTime:"",bodyTempStat:"",bodyTemp:"",desc:"",defaultList:[],imgName:"",visible:!1,uploadList:[]},uploadListArr:[],noStartChose:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},noEndChose:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},studentId:"",optPhone:"",isLoading:!1}},created:function(){document.title=this.title,this.studentId=this.$route.query.studentId,this.optPhone=this.$route.query.optPhone},activated:function(){document.title=this.title},mounted:function(){var t=this;this.formValidate.uploadList=this.$refs.upload.fileList,console.log("获取图片地址11",this.$refs.upload.fileList),this.$refs.upload.fileList.forEach((function(e){t.uploadListArr.push(e.url)})),console.log("获取图片地址---",this.uploadListArr)},methods:(i={changeBodyTemp:function(){var t=String(this.formValidate.bodyTemp).indexOf(".")+1,e=0!==t?String(this.formValidate.bodyTemp).length-t:0,a=Number.parseFloat(this.formValidate.bodyTemp);if(console.log(a),isNaN(a)||e>1||a<35||a>42)return this.$Message.info("请输入正确体温"),this.formValidate.bodyTemp="",!1},addAskFun:function(){var t=this;this.isLoading=!0;new RegExp("^1[3578]\\d{9}$");if(this.formValidate.status)if(this.formValidate.startTime)if(this.formValidate.endTime)if(this.formValidate.bodyTempStat)if(this.formValidate.bodyTemp)if(this.formValidate.desc){var e=Object(r["a"])({eventEndTime:c["a"].changeTimeFormat(this.formValidate.endTime),eventPicPathArr:this.uploadListArr,eventReason:this.formValidate.desc,eventStartTime:c["a"].changeTimeFormat(this.formValidate.startTime),eventTotalDay:this.formValidate.totalTime,eventType:this.formValidate.status,optPhone:this.optPhone,studentId:this.studentId,temperature:this.formValidate.bodyTemp,temperatureStatus:"体温正常"==this.formValidate.bodyTempStat?1:2},"optPhone",this.optPhone);console.log("params",e),Object(s["a"])({method:"post",url:l["a"].recordUrl.addAsk,data:e,headers:{"Content-Type":"application/json"}}).then((function(e){console.log("res",e),t.isLoading=!1,200==e.code?(console.log("res",e),setTimeout((function(){t.$router.go(-1)}),1500)):t.$Message.info(e.msg)})).catch((function(t){console.log(t)}))}else this.$Message.info("请假事由不能为空");else this.$Message.info("体温不能为空");else this.$Message.info("体温情况不能为空");else this.$Message.info("请假结束时间不能为空");else this.$Message.info("请假开始时间不能为空");else this.$Message.info("请假类型不能为空")},choseStartTime:function(){if(this.formValidate.endTime){var t=this.formValidate.startTime.getTime(),e=this.formValidate.endTime.getTime();if(t>e)this.$Message.info("结束时间不能小于开始时间"),this.formValidate.startTime="";else if(t==e)this.$Message.info("开始时间与结束时间一致"),this.formValidate.startTime="";else{var a=e-t;this.formValidate.totalTime=c["a"].TimeInterval(a)}}},choseEndTime:function(){if(this.formValidate.startTime){var t=this.formValidate.startTime.getTime(),e=this.formValidate.endTime.getTime();if(t>e)this.$Message.info("结束时间不能小于开始时间"),this.formValidate.endTime="";else if(t==e)this.$Message.info("开始时间与结束时间一致"),this.formValidate.endTime="";else{var a=e-t;this.formValidate.totalTime=c["a"].TimeInterval(a)}}},clearStartTime:function(){this.formValidate.startTime="",this.formValidate.totalTime=""}},Object(r["a"])(i,"clearStartTime",(function(){this.formValidate.endTime="",this.formValidate.totalTime=""})),Object(r["a"])(i,"handleSubmit",(function(t){var e=this;this.$refs[t].validate((function(t){t?e.addAskFun():e.$Message.error("Fail!")}))})),Object(r["a"])(i,"handleReset",(function(t){this.$refs[t].resetFields()})),Object(r["a"])(i,"handleView",(function(t){console.log("打开图片地址",t),this.formValidate.imgName=t,this.formValidate.visible=!0})),Object(r["a"])(i,"handleRemove",(function(t){console.log("删除",t),console.log("删除11",this.uploadListArr);var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1),this.uploadListArr.splice(e.indexOf(t),1)})),Object(r["a"])(i,"handleSuccess",(function(t,e){console.log("res",e),e.name=t.data,e.url=t.data,console.log("图片地址数组",this.formValidate.uploadList),this.uploadListArr.push(e.url)})),Object(r["a"])(i,"handleFormatError",(function(t){this.$Message.error("文件"+t.name+" 不正确，请选择JPG还是PNG.")})),Object(r["a"])(i,"handleMaxSize",(function(t){this.$Message.error("文件"+t.name+" 太大不能超过8M.")})),Object(r["a"])(i,"handleBeforeUpload",(function(t){var e=this.formValidate.uploadList.length<5;return e?new Promise((function(e){console.log("压缩前-----",t),d["compressAccurately"](t,2048).then((function(t){console.log("压缩后-------",t),e(t)}))})):(this.$Notice.warning({title:"Up to five pictures can be uploaded."}),!1)})),i)}),f=u,m=(a("1583"),a("2877")),h=Object(m["a"])(f,o,n,!1,null,"5f95c6b5",null);e["default"]=h.exports}}]);